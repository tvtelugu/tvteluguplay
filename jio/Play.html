<?php

// Copyright 2021-2024 SnehTV, Inc.
// Licensed under MIT (https://github.com/mitthu786/TS-JioTV/blob/main/LICENSE)
// Created By : TechieSneh

error_reporting(0);
$data = base64_decode($_REQUEST['data']);
$data = explode('=?=', $data);
$cid = $data[0];
$name = str_replace('_', ' ', $cid);
$id = $data[1];

?>

<!DOCTYPE html>
<html lang="en">

<head>
    <title id="pageTitle">🕊𝐓𝐕𝐓𝐞𝐥𝐮𝐠𝐮™</title>
    <meta charset="UTF-8" />
    <meta name="description" content="ENJOY FREE LIVE TV">
    <meta name="keywords" content="LIVETV, SPORTS, MOVIES, MUSIC">
    <meta name="author" content="Vaathala">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="https://cdn.plyr.io/3.6.2/plyr.css" />
    <script src="https://cdn.plyr.io/3.6.3/plyr.js" defer></script>
    <script src="main/assets/js/jwplayer.js" defer></script>
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/tvtelugu/play/main/images/TVtelugu.ico" type="image/x-icon">
    <script src='https://content.jwplatform.com/libraries/IDzF9Zmk.js' defer></script>
    <style>
        /* Minimize CSS here */
        html {
            font-family: Poppins;
            background: #000;
            overflow: hidden;
            margin: 0;
        }
        .logo {
            position: absolute;
            bottom: 25px;
            left: 10px;
            width: 100px;
            height: 80px;
            background: url('https://raw.githubusercontent.com/tvtelugu/play/main/images/TVTELUGU-B.png') no-repeat;
            background-size: contain;
            z-index: 1;
        }
        /* Minimized remaining CSS */
    </style>
</head>

<body>
    <video id="myElement"></video>
    <div class="logo"></div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            jwplayer.key = 'Khpp2dHxlBJHC8MCmLnBuV2jK/DwDnJMniwF6EO9HC/riJ712ZmbHg==';

            // Function to get URL parameter by name
            function getUrlParameter(name) {
                const results = new RegExp('[?&]' + name + '=([^&#]*)').exec(window.location.search);
                return results ? decodeURIComponent(results[1].replace(/\+/g, ' ')) : '';
            }

            const id = getUrlParameter('id');

            // Load the m1.json file and get the video data by ID
            fetch('jio.json')
                .then(response => response.json())
                .then(data => {
                    const videoData = data.find(video => video.id === id);

                    if (videoData) {
                        jwplayer("myElement").setup({
                            title: videoData.name,
                            description: "VaathalaTV",
                            image: videoData.logo,
                            aspectratio: '16:9',
                            width: '100%',
                            mute: false,
                            autostart: true,
                            file: videoData.link,
                            type: "hls",
                            captions: {color: '#ffb800', fontSize: 30, backgroundOpacity: 0},
                            sharing: {
                                sites: ['facebook', 'twitter']
                            }
                        });
                    }
                })
                .catch(error => console.error('Error loading video data:', error));
        });
    </script>
</body>

</html>
